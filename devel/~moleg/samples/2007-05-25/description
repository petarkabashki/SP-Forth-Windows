Разбить очень большой текстовый файл на несколько маленьких.

Необходимо получить из очень большого текстового файла набор маленьких,
с размером не превышающим указанный. Написать готовую програму break.exe,
получающую на входе в качестве параметров имя исходного файла, максимальный
размер куска, на который нужно разбить текст или число кусков, на которое
нужно разбить файл, а так же правило именования полученных кусков. Файл
можно разрывать только по целым строкам. В заголовке каждого созданного
файла должен быть указан порядковый номер части.

Ключи командной строки:
 -h | /h | /? | -? | help или запуск программы без параметров
  должны приводить к выводу подсказки по использованию программы.

 -b n | -kb n | -mb n - указание на какого размера файлы разбить
  исходный, соответственно число n - определяет количество
  байт в случае ключа -b, количество килобайт в случае ключа -kb
  и количество мегабайт в случае ключа -mb на которые необходимо
  разбить исходный файл.

 -n n - ключ -n определяет на какое количество файлов необходимо
  разбить исходный текст. Данный ключ и ключи -b -kb -mb взаимоисключащи
  и не могут встречаться в командной строке одновременно.

 -f mask - именовать полученные файлы согласно указанным правилам.
  после ключа f находится текстовый шаблон, согласно которому необходимо
  нумеровать полученные части большого файла. mask может быть заключен
  в кавычки, если содержит пробельные символы внутри.
  Должны распознаваться следующие символы подстановки:
  * - подставить содержимое поля вплодь до первой встреченой точки имени
      исходного файла от текущей точки, то есть для файла abc.txt **
      должна подставить в полученное имя следующий текст: abcabc, а для
      маски 1.* -  1.txt ;
  # - вставить разряд числа счетчика номера полученного файла, то есть
      для файла abc.txt маска *###.txt должен привести к созданию следующих
      имен файлов: abc001.txt abc002.txt и так далее;
  ? - вставить символ из текущей позиции исходного файла:
      abc.txt при маске z?? должен сформировать такой текст: zbc
  все остальные символы маски подставляются в текст без изменений. Точки
  разделяют поля для символа *.

  -s name - разбивать на меньшие указанный файл. Дополнительный ключ,
   который может быть опущен, если имя файла находится в конце строки
   параметров.

Любые дополнительные параметры в командной строке должны приводить к
выводу сообщения об ошибке, с предложением вывести информацию по
использованию программы (то есть с предложением запустить программу с
одним из ключей-подсказок). Если опция -f опущена, то файл именуется
следующим образом: name.####.*
